<div class="main-container">
  <h2>Gestor de Suscriptores</h2>

  <div class="search-container">
    <input
      type="text"
      [(ngModel)]="contractNumber"
      placeholder="Número de contrato"
      (keyup.enter)="searchContract()"
    />
    <button (click)="searchContract()" [disabled]="isLoading">
      {{ isLoading ? 'Buscando...' : 'Buscar' }}
    </button>
  </div>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <div *ngIf="subscriberInfo && !isLoading" class="subscriber-info-card">
    <h3>Información del Contrato</h3>
    <div class="info-grid">
      <p>
        <strong>Contrato No:</strong>
        <span>{{ subscriberInfo.idcontrato }}</span>
      </p>
      <p>
        <strong>Nombre:</strong>
        <span>{{ subscriberInfo.suscriptor.nombre }}</span>
      </p>
      <p>
        <strong>Email:</strong>
        <span>{{ subscriberInfo.suscriptor.email }}</span>
      </p>
      <p>
        <strong>Fecha de Contratación:</strong>
        <span>{{ subscriberInfo.fechaContr | date:'dd/MM/yyyy' }}</span>
      </p>
      <p>
        <strong>Estado:</strong>
        <span [ngClass]="subscriberInfo.fechaFin ? 'status-inactive' : 'status-active'">
          {{ subscriberInfo.fechaFin ? 'INACTIVO' : 'ACTIVO' }}
        </span>
      </p>
    </div>

    <div class="debt-section">
        <h4>Calcular Adeudo</h4>
        <div class="date-inputs">
            <input type="date" [(ngModel)]="startDate" />
            <input type="date" [(ngModel)]="endDate" />
        </div>
        <button (click)="calculateDebt()">Calcular</button>
    </div>
  </div>
</div>
